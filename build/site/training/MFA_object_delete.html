<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>RGW Object Delete with MFA :: Ceph Top Gun Enablement</title>
    <link rel="canonical" href="https://likid0.github.io/ceph-top-gun-enablement/training/MFA_object_delete.html">
    <meta name="generator" content="Antora 3.1.2">
    <link rel="stylesheet" href="../_/css/site.css">
    <script>var uiRootPath = '../_'</script>
  </head>
  <body class="article">
<header class="header">
  <nav class="navbar">
    <div class="navbar-brand">
      <a class="navbar-item" href="https://docs.ceph.com/en/latest/" target="_blank">
          <img src="../_/img/header_logo_reverse.svg" height="48px" alt="Ceph">
      </a>
      <button class="navbar-burger" data-target="topbar-nav">
        <span></span>
        <span></span>
        <span></span>
      </button>
    </div>
    <div id="topbar-nav" class="navbar-menu">
      <div class="navbar-end">
        <div class="navbar-item has-dropdown is-hoverable">
          <a class="navbar-link" href="#">Get Help</a>
          <div class="navbar-dropdown">
            <a class="navbar-item" href="https://access.redhat.com/documentation/zh-cn/red_hat_ceph_storage/5" target="_blank">Ceph Documentation</a>
            <a class="navbar-item" href="https://bugzilla.redhat.com/describecomponents.cgi?product=Red%20Hat%20OpenShift%20Container%20Storage" target="_blank">Browse Bugs</a>
          </div>
        </div>
        <div class="navbar-item has-dropdown is-hoverable">
          <a class="navbar-link" href="#">Improve Guides</a>
          <div class="navbar-dropdown">
            <a class="navbar-item" href="https://github.com/likid0/ceph-top-gun-enablement/issues/new/choose" target="_blank">Open Issue</a>
          </div>
        </div>
        <div class="navbar-item has-dropdown is-hoverable">
          <a class="navbar-link" href="#">More Infos</a>
          <div class="navbar-dropdown">
            <a class="navbar-item" href="https://www.redhat.com/en/blog/channel/red-hat-storage" target="_blank">Our Blog</a>
            <a class="navbar-item" href="https://www.youtube.com/channel/UCoyG8VyvB-XUxQl1mD3T3Gw" target="_blank">Youtube</a>
            <a class="navbar-item" href="https://docs.ceph.com/en/latest/" target="_blank">Ceph Storage Technology</a>
          </div>
        </div>
      </div>
    </div>
  </nav>
</header>
<div class="body">
<div class="nav-container" data-component="training" data-version="master">
  <aside class="nav">
    <div class="panels">
<div class="nav-panel-menu is-active" data-panel="menu">
  <nav class="nav-menu">
    <h3 class="title"><a href="index.html">Ceph Top-Gun Enablement</a></h3>
<ul class="nav-list">
  <li class="nav-item" data-depth="0">
    <button class="nav-item-toggle"></button>
    <span class="nav-text">Ceph Lab Setup</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="opentlc_lab_env.html">Opentlc Lab Env</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="0">
    <button class="nav-item-toggle"></button>
    <span class="nav-text">Core Ceph</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="ceph_introduction.html">Ceph Introduction</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="ceph_architecture.html">Ceph Architecture</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="ceph_cluster_partitioning.html">Ceph Cluster Partitioning</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="ceph_hardware.html">Ceph Hardware Recommendations</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="ceph_deployment_intro.html">Ceph Install Methods </a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="ceph_cephadm_intro.html">Cephadm Orchestrator</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="ceph_deploy_basic.html">Deploy Ceph with Cephadm</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="ceph_deploy_ui.html">Deploy Ceph from the UI</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="ceph_dashboard_metrics.html">Ceph Dashboard Management &amp; Metrics</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="ceph_cli_intro.html">Ceph CLI basic commands</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="ceph_configuration.html">Ceph Configuration</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="ceph_pools.html">Ceph storage pools config</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="ceph_pgs.html">Ceph Health and PGs</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="ceph_bluestore.html">Ceph OSD Bluestore</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="ceph_recovery.html">Ceph OSD Failure/Recovery</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="ceph_cephx.html">Rados CephX Auth/AuthZ</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="ceph_version.html">What version of Ceph am I running?</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="ceph_deployment_challenge.html">Challenge Ceph Deployment</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="0">
    <button class="nav-item-toggle"></button>
    <span class="nav-text">Ceph RADOS Block Device</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="cephrbd_intro.html">RADOS Block Device introduction</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="cephrbd_export.html">RBD Import/Export</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="cephrbd_mirroring.html">RBD Mirroring</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="cephrbd_challenge.html">Challenge RBD</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="0">
    <button class="nav-item-toggle"></button>
    <span class="nav-text">CephFS Shared FileSystem</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="cephfs_intro.html">CephFS introduction &amp; Deployment</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="cephfs_advanced.html">CephFS Deep Dive</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="ceph_cephfs_challenge.html">Challenge Cephfs</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="0">
    <button class="nav-item-toggle"></button>
    <span class="nav-text">Ceph RadosGW</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="radosgw_intro.html">RGW Introduction &amp; Deployment</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="radosgw_arch_deep_dive.html">RGW Deep Dive</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="radosgw_ha.html">RGW High Availability</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="radosgw_ssl.html">RGW &amp; Ingress with SSL</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="radosgw_users_quotas.html">RGW Users &amp; Quotas</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="radosgw_auth.html">RGW Auth &amp; Authz</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="radosgw_object_versioning.html">RGW S3 Object Versioning</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="radosgw_placement_and_storage_classes.html">RGW Placement &amp; Storage Classes</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="radosgw_life_cycle_management.html">RGW Life Cycle Management</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="radosgw_bucket_policy.html">RGW S3 Bucket Policy</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="radosgw_sts_introduction.html">RGW Secure Token Service</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="radosgw_sts_bucket_role_policy.html">RGW Bucket vs Role Policy</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="radosgw_multisite.html">RGW Multisite Replication</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="radosgw_cloudsync.html">RGW Object Cloud Transition</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="radosgw_archive.html">RGW Archive Zone</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="radosgw_presignedurl.html">RGW presigned URL</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="radosgw_opslog.html">RGW Opslog</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="radosgw_bucket_notification.html">RGW bucket Notification</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="radosgw_object_lock.html">RGW Object Lock</a>
  </li>
  <li class="nav-item is-current-page" data-depth="1">
    <a class="nav-link" href="MFA_object_delete.html">RGW MFA Delete</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="ceph_rgw_challenge.html">Challenge RGW</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="0">
    <button class="nav-item-toggle"></button>
    <span class="nav-text">Ceph Upgrades</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="ceph_upgrade_4_to_5.html">Ceph Upgrade from RHCS 4 to IBMCS 5.3</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="ceph-upgrades_cephadm.html">Minor Version Upgrades with Cephadm</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="0">
    <button class="nav-item-toggle"></button>
    <span class="nav-text">Ceph Troubleshooting</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="troubleshooting_logging.html">Troubleshooting Logs Debug Mode</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="trouble-shooting-nearfull-osds.html">Troubleshooting nearfull OSDs</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="troubleshooting_bluestore.html">Troubleshooting Bluestore issues</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="trouble-shooting-large-omap-objects.html">Troubleshooting Large Omap Objects</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="troubleshooting_cephadm_device_ls.html">Troubleshooting Cephadm devcice ls </a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="troubleshooting_break_and_fix.html">Troubleshooting Break &amp; Fix Hands-on</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="0">
    <button class="nav-item-toggle"></button>
    <span class="nav-text">Ceph Benchmarking</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="ceph_performance_example.html">Setting the Inital Baseline</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="ceph_performance_fio.html">Benchmarking Ceph block and File</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="ceph_performance_object.html">Benchmarking Ceph Object(RGW)</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="0">
    <button class="nav-item-toggle"></button>
    <span class="nav-text">Ceph Stretched</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="rhcs-stretched-deploy.html">Ceph Stretch Mode</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="0">
    <button class="nav-item-toggle"></button>
    <span class="nav-text">Ceph Challenge Solutions</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="ceph_deployment_challenge_solution.html">Ceph Deployment Solution</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="cephrbd_challenge_solution.html">Ceph RBD Solution</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="ceph_cephfs_challenge_solution.html">Ceph CephFS Solution</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="ceph_rgw_challenge_solution.html">Ceph RGW Solution</a>
  </li>
</ul>
  </li>
</ul>
  </nav>
</div>
<div class="nav-panel-explore" data-panel="explore">
  <div class="context">
    <span class="title">Ceph Top-Gun Enablement</span>
    <span class="version">master</span>
  </div>
  <ul class="components">
    <li class="component is-current">
      <a class="title" href="index.html">Ceph Top-Gun Enablement</a>
      <ul class="versions">
        <li class="version is-current is-latest">
          <a href="index.html">master</a>
        </li>
      </ul>
    </li>
  </ul>
</div>
    </div>
  </aside>
</div>
<main class="article">
<div class="toolbar" role="navigation">
<button class="nav-toggle"></button>
  <a href="index.html" class="home-link"></a>
<nav class="breadcrumbs" aria-label="breadcrumbs">
  <ul>
    <li><a href="index.html">Ceph Top-Gun Enablement</a></li>
    <li>Ceph RadosGW</li>
    <li><a href="MFA_object_delete.html">RGW MFA Delete</a></li>
  </ul>
</nav>
  <div class="edit-this-page"><a href="file:///antora/training/modules/ROOT/pages/MFA_object_delete.adoc">Edit this Page</a></div>
</div>
  <div class="content">
<aside class="toc sidebar" data-title="Contents" data-levels="2">
  <div class="toc-menu"></div>
</aside>
<article class="doc">
<h1 class="page">RGW Object Delete with MFA</h1>
<div class="olist arabic">
<ol class="arabic">
<li>
<p></p>
<div class="quoteblock">
<blockquote>
<div class="paragraph">
<p>Get the oathtool</p>
</div>
</blockquote>
</div>
</li>
</ol>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 100%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">wget
<a href="https://dl.fedoraproject.org/pub/epel/9/Everything/x86_64/Packages/o/oathtool-2.6.7-2.el9.x86_64.rpm" class="bare">https://dl.fedoraproject.org/pub/epel/9/Everything/x86_64/Packages/o/oathtool-2.6.7-2.el9.x86_64.rpm</a></th>
</tr>
</thead>
</table>
<div class="olist arabic">
<ol class="arabic" start="2">
<li>
<p></p>
<div class="quoteblock">
<blockquote>
<div class="paragraph">
<p>Install oathtool</p>
</div>
</blockquote>
</div>
</li>
</ol>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 100%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">dnf Install oathtool</th>
</tr>
</thead>
</table>
<div class="olist arabic">
<ol class="arabic" start="3">
<li>
<p></p>
<div class="quoteblock">
<blockquote>
<div class="paragraph">
<p>Generate a seed Creating a seed for multi-factor authentication</p>
</div>
</blockquote>
</div>
</li>
</ol>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 100%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">~]# head -10 /dev/urandom</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">sha512sum</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">cut -b 1-30<br>
b4902c641a1363541b32abc2a26817</p></td>
</tr>
</tbody>
</table>
<div class="olist arabic">
<ol class="arabic" start="4">
<li>
<p></p>
<div class="quoteblock">
<blockquote>
<div class="paragraph">
<p>Configure the one-time password generator oathtool and the back-end MFA
system to use the same seed.</p>
</div>
</blockquote>
</div>
</li>
</ol>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 100%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">~]# oathtool -d6 --totp b4902c641a1363541b32abc2a26817<br>
776148</th>
</tr>
</thead>
</table>
<div class="olist arabic">
<ol class="arabic" start="5">
<li>
<p></p>
<div class="quoteblock">
<blockquote>
<div class="paragraph">
<p>Create a new MFA TOTP token</p>
</div>
</blockquote>
</div>
</li>
</ol>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 100%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">~]# radosgw-admin mfa create --uid=kvm-mfa --totp-serial=MFAtest26
--totp-seed=b4902c641a1363541b32abc2a26817</th>
</tr>
</thead>
</table>
<div class="olist arabic">
<ol class="arabic" start="6">
<li>
<p></p>
<div class="quoteblock">
<blockquote>
<div class="paragraph">
<p>Verify the mfa-ids is listed in the user info</p>
</div>
</blockquote>
</div>
</li>
</ol>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 100%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">~]# radosgw-admin user info --uid kvm-mfa<br>
\{<br>
"user_id": "kvm-mfa",<br>
"display_name": "kvm-mfa",<br>
&#8230;&#8203;&#8230;&#8203;<br>
"type": "rgw",<br>
"mfa_ids": [<br>
"MFAtest26"<br>
]<br>
}</th>
</tr>
</thead>
</table>
<div class="olist arabic">
<ol class="arabic" start="7">
<li>
<p></p>
<div class="quoteblock">
<blockquote>
<div class="paragraph">
<p>Check the mfa token</p>
</div>
</blockquote>
</div>
</li>
</ol>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 100%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">~]# oathtool -d6 --totp b4902c641a1363541b32abc2a26817<br>
977719<br>
~]# radosgw-admin mfa check --uid=kvm-mfa --totp-serial=MFAtest26
--totp-pin=977719<br>
ok</th>
</tr>
</thead>
</table>
<div class="olist arabic">
<ol class="arabic" start="8">
<li>
<p></p>
<div class="quoteblock">
<blockquote>
<div class="paragraph">
<p>List Totp token</p>
</div>
</blockquote>
</div>
</li>
</ol>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 100%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">~]# radosgw-admin mfa list --uid kvm-mfa<br>
\{<br>
"entries": [<br>
\{<br>
"type": 2,<br>
"id": "MFAtest26",<br>
"seed": "b4902c641a1363541b32abc2a26817",<br>
"seed_type": "hex",<br>
"time_ofs": 0,<br>
"step_size": 30,<br>
"window": 2<br>
}<br>
]<br>
}<br>
~]#</th>
</tr>
</thead>
</table>
<div class="olist arabic">
<ol class="arabic" start="9">
<li>
<p></p>
<div class="quoteblock">
<blockquote>
<div class="paragraph">
<p>Create a bucket and enable MFA deletes</p>
</div>
</blockquote>
</div>
</li>
</ol>
</div>
<div class="paragraph">
<p>Using awscli -</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 100%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">~]# oathtool -d6 --totp b4902c641a1363541b32abc2a26817<br>
293651<br>
~]# aws --endpoint=http://ceph-kvm-5-18grvu-node5:80 s3api
put-bucket-versioning --bucket bkt-mfa --versioning-configuration
MFADelete=Enabled,Status=Enabled --mfa "MFAtest26 293651"<br>
[root@ceph-kvm-5-18grvu-node6 ~]#</th>
</tr>
</thead>
</table>
<div class="olist arabic">
<ol class="arabic" start="10">
<li>
<p></p>
<div class="quoteblock">
<blockquote>
<div class="paragraph">
<p>Put object</p>
</div>
</blockquote>
</div>
</li>
</ol>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 100%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">~]# aws --endpoint=http://ceph-kvm-5-18grvu-node5:80 s3api put-object
--bucket bkt-mfa --key mfa-obj1 --body /etc/hosts<br>
\{<br>
"ETag": "\"6d344b5605c05270181cf75be63e9ca6\"",<br>
"VersionId": "WksVOP-fiMTLj8xBQlUnb8WgjN7mioI"<br>
}</th>
</tr>
</thead>
</table>
<div class="olist arabic">
<ol class="arabic" start="11">
<li>
<p></p>
<div class="quoteblock">
<blockquote>
<div class="paragraph">
<p>Delete object without totp</p>
</div>
</blockquote>
</div>
</li>
</ol>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 100%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">~]# aws --endpoint=http://ceph-kvm-5-18grvu-node5:80 s3api
delete-object --bucket bkt-mfa --key mfa-obj1 --version-id
WksVOP-fiMTLj8xBQlUnb8WgjN7mioI<br>
An error occurred (AccessDenied) when calling the DeleteObject
operation: Unknown</th>
</tr>
</thead>
</table>
<div class="olist arabic">
<ol class="arabic" start="12">
<li>
<p></p>
<div class="quoteblock">
<blockquote>
<div class="paragraph">
<p>Delete object with totp</p>
</div>
</blockquote>
</div>
</li>
</ol>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 100%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">~]# aws --endpoint=http://ceph-kvm-5-18grvu-node5:80 s3api
delete-object --bucket bkt-mfa --key mfa-obj1 --version-id
WksVOP-fiMTLj8xBQlUnb8WgjN7mioI --mfa "MFAtest26 022233"<br>
\{<br>
"VersionId": "WksVOP-fiMTLj8xBQlUnb8WgjN7mioI"<br>
}</th>
</tr>
</thead>
</table>
<div class="olist arabic">
<ol class="arabic" start="13">
<li>
<p></p>
<div class="quoteblock">
<blockquote>
<div class="paragraph">
<p>Verify object is deleted</p>
</div>
</blockquote>
</div>
</li>
</ol>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 100%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">~]# aws --endpoint=http://ceph-kvm-5-18grvu-node5:80 s3api
list-object-versions --bucket bkt-mfa<br>
\{<br>
"RequestCharged": null<br>
}</th>
</tr>
</thead>
</table>
<div class="paragraph">
<p>References:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p></p>
<div class="quoteblock">
<blockquote>
<div class="paragraph">
<p><a href="https://access.redhat.com/documentation/en-us/red_hat_ceph_storage/5/html-single/object_gateway_guide/index#the-ceph-object-gateway-and-multi-factor-authentication"><span class="underline">https://access.redhat.com/documentation/en-us/red_hat_ceph_storage/5/html-single/object_gateway_guide/index#the-ceph-object-gateway-and-multi-factor-authentication</span></a></p>
</div>
</blockquote>
</div>
</li>
<li>
<p></p>
<div class="quoteblock">
<blockquote>
<div class="paragraph">
<p><a href="https://docs.aws.amazon.com/cli/latest/reference/s3api/put-bucket-versioning.html"><span class="underline">https://docs.aws.amazon.com/cli/latest/reference/s3api/put-bucket-versioning.html</span></a></p>
</div>
</blockquote>
</div>
</li>
<li>
<p></p>
<div class="quoteblock">
<blockquote>
<div class="paragraph">
<p><a href="https://docs.aws.amazon.com/cli/latest/reference/s3api/delete-object.html"><span class="underline">https://docs.aws.amazon.com/cli/latest/reference/s3api/delete-object.html</span></a></p>
</div>
</blockquote>
</div>
</li>
</ol>
</div>
</article>
  </div>
</main>
</div>
<footer class="footer">
  <a class="navbar-item" href="https://www.redhat.com/en/technologies/cloud-computing/openshift-container-storage" target="_blank">
      <img src="../_/img/header_logo.svg" alt="Ceph">
  </a>
</footer>
<script id="site-script" src="../_/js/site.js" data-ui-root-path="../_"></script>
<script async src="../_/js/vendor/highlight.js"></script>
  </body>
</html>
